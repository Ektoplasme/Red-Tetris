{"ast":null,"code":"import _slicedToArray from \"/Users/valeriecardon/Red-Tetris/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"/Users/valeriecardon/Red-Tetris/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/valeriecardon/Red-Tetris/client/src/components/Game.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useReducer, useEffect, useRef } from 'react';\nimport pieces from './pieces.json';\nimport tab from './pieces.1.json';\nimport { tetriReducer, initialTetriState } from '../reducers/tetriReducer';\nconst blockSize = 40;\nconst blockStyle = {\n  backgroundColor: 'lightgrey',\n  width: \"\".concat(blockSize, \"px\"),\n  height: \"\".concat(blockSize, \"px\"),\n  border: '1px solid grey'\n};\n\nconst Block = ({\n  empty,\n  color,\n  transparent\n}) => {\n  return React.createElement(\"div\", {\n    style: !!empty ? _objectSpread({}, blockStyle) : transparent ? _objectSpread({}, blockStyle, {\n      border: '1px solid transparent',\n      backgroundColor: 'transparent'\n    }) : _objectSpread({}, blockStyle, {\n      border: '1px solid black',\n      backgroundColor: \"\".concat(color)\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 17\n    },\n    __self: this\n  });\n};\n\nexport const Game = () => {\n  // const [curTetri, moveTetri] = useReducer(tetriReducer, initialTetriState)\n  const _useState = useState(0),\n        _useState2 = _slicedToArray(_useState, 2),\n        counter = _useState2[0],\n        increment = _useState2[1];\n\n  const initialTetriState = () => {\n    const name = pieces[counter];\n    console.log(tab);\n    return {\n      name: name,\n      x: 0,\n      y: 0,\n      leftSpace: tab[name].position.leftSpace,\n      rightSpace: tab[name].position.rightSpace,\n      downSpace: tab[name].position.downSpace,\n      rot: 0,\n      form: tab[name].position[0].form,\n      color: tab[name].color\n    };\n  };\n\n  const _useState3 = useState(initialTetriState()),\n        _useState4 = _slicedToArray(_useState3, 2),\n        curTetri = _useState4[0],\n        moveTetri = _useState4[1];\n\n  useEffect(() => {\n    refInterval.current = setInterval(() => {\n      moveTetri(tetri => {\n        return _objectSpread({}, tetri, {\n          y: tetri.y + 1\n        });\n      });\n    }, 500); // moveTetri({type: 'SET_TETRI', payload: curTetri.name})\n    // refInterval.current = setInterval(() => {\n    // \t\tmoveTetri({type: 'DOWN'})\n    // \t}, 200)\n    // document.addEventListener(\"keydown\", event => {\n    // \tif (event.keyCode === 37) {\n    // \t\tmoveTetri({type: 'LEFT'})\n    // \t}\n    // \tif (event.keyCode === 39) {\n    // \t\tmoveTetri({type: 'RIGHT'})\n    // \t}\n    // \tif (event.keyCode === 38) {\n    // \t\tmoveTetri({type: 'ROTATION'})\n    // \t}\n    // })\n\n    return () => {// clearInterval(refInterval.current)\n    };\n  }, [curTetri.name]);\n  useEffect(() => {\n    if (curTetri.y > 15 + curTetri.downSpace) {\n      clearInterval(refInterval.current);\n      board.tetriList.length >= 1 ? board.tetriList.concat(curTetri) : board.tetriList.push(curTetri);\n      moveTetri({\n        type: 'SET_TETRI',\n        payload: pieces.pieces[curTetri.listIndex]\n      });\n    }\n  });\n\n  const _useState5 = useState({\n    tab: [[0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]],\n    tetriList: []\n  }),\n        _useState6 = _slicedToArray(_useState5, 2),\n        board = _useState6[0],\n        updateBoard = _useState6[1];\n\n  const refInterval = useRef(false);\n  const tetri = curTetri.form;\n  return React.createElement(\"div\", {\n    className: \"flex center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: 'absolute',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, \"x: \".concat(curTetri.x, \" y: \").concat(curTetri.y)), board.tab.map((line, index) => {\n    return React.createElement(\"div\", {\n      style: {\n        display: 'flex'\n      },\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, line.map((col, index) => {\n      return React.createElement(\"div\", {\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, col > 0 ? React.createElement(Block, {\n        color: curTetri.color,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }) : React.createElement(Block, {\n        empty: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }));\n    }));\n  }), React.createElement(\"div\", {\n    className: \"absolute\",\n    style: {\n      backgroundColor: 'black',\n      top: \"\".concat(blockSize * curTetri.y + curTetri.y * 2, \"px\"),\n      left: \"\".concat(blockSize * curTetri.x + curTetri.x * 2, \"px\")\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, tetri.map((line, index) => {\n    return React.createElement(\"div\", {\n      style: {\n        display: 'flex'\n      },\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, line.map((col, index) => {\n      return React.createElement(\"div\", {\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, col > 0 ? React.createElement(Block, {\n        color: curTetri.color,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }) : React.createElement(Block, {\n        transparent: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }));\n    }));\n  }))));\n};","map":{"version":3,"sources":["/Users/valeriecardon/Red-Tetris/client/src/components/Game.js"],"names":["React","useState","useReducer","useEffect","useRef","pieces","tab","tetriReducer","initialTetriState","blockSize","blockStyle","backgroundColor","width","height","border","Block","empty","color","transparent","Game","counter","increment","name","console","log","x","y","leftSpace","position","rightSpace","downSpace","rot","form","curTetri","moveTetri","refInterval","current","setInterval","tetri","clearInterval","board","tetriList","length","concat","push","type","payload","listIndex","updateBoard","map","line","index","display","col","top","left"],"mappings":"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","sourcesContent":["import React, { useState, useReducer, useEffect, useRef } from 'react'\nimport pieces from './pieces.json'\nimport tab from './pieces.1.json'\nimport {tetriReducer, initialTetriState} from '../reducers/tetriReducer'\n\nconst blockSize = 40\n\nconst blockStyle = ({\n\tbackgroundColor: 'lightgrey',\n\twidth: `${blockSize}px`,\n\theight: `${blockSize}px`,\n\tborder: '1px solid grey'\n})\n\nconst Block = ({empty, color, transparent})=>{\n\treturn (\n\t\t<div\n\t\t\tstyle={\n\t\t\t\t!!empty\n\t\t\t\t\t? {...blockStyle}\n\t\t\t\t\t: transparent\n\t\t\t\t\t\t? {...blockStyle, border: '1px solid transparent', backgroundColor: 'transparent'}\n\t\t\t\t\t\t: {...blockStyle, border: '1px solid black', backgroundColor: `${color}`}}\n\t\t/>\n\t)\n}\n\n\nexport const Game = () => {\n\n\t// const [curTetri, moveTetri] = useReducer(tetriReducer, initialTetriState)\n\n\n\tconst [counter, increment] = useState(0)\n\n\n\tconst initialTetriState = () => {\n\t\tconst name = pieces[counter]\n\t\tconsole.log(tab)\n\t\treturn({\n\t\t\tname: name,\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\tleftSpace: tab[name].position.leftSpace,\n\t\t\trightSpace: tab[name].position.rightSpace,\n\t\t\tdownSpace: tab[name].position.downSpace,\n\t\t\trot: 0,\n\t\t\tform: tab[name].position[0].form,\n\t\t\tcolor: tab[name].color\n\t})}\n\n\tconst [curTetri, moveTetri] = useState(initialTetriState())\n\n\tuseEffect(() => {\n\n\t\trefInterval.current = setInterval(() => {\n\t\t\tmoveTetri((tetri)=>{\n\t\t\t\treturn {...tetri, y: tetri.y + 1}\n\t\t\t})\n\t\t}, 500)\n\t\t// moveTetri({type: 'SET_TETRI', payload: curTetri.name})\n\n\t\t// refInterval.current = setInterval(() => {\n\t\t// \t\tmoveTetri({type: 'DOWN'})\n\t\t// \t}, 200)\n\n\t\t// document.addEventListener(\"keydown\", event => {\n\t\t// \tif (event.keyCode === 37) {\n\t\t// \t\tmoveTetri({type: 'LEFT'})\n\t\t// \t}\n\t\t// \tif (event.keyCode === 39) {\n\t\t// \t\tmoveTetri({type: 'RIGHT'})\n\t\t// \t}\n\t\t// \tif (event.keyCode === 38) {\n\t\t// \t\tmoveTetri({type: 'ROTATION'})\n\t\t// \t}\n\t\t// })\n\n\t\t\treturn () => {\n\t\t\t\t// clearInterval(refInterval.current)\n\t\t\t}\n\t\t}, [curTetri.name]\n\t)\n\n\tuseEffect(() => {\n\t\tif (curTetri.y > 15 + curTetri.downSpace){\n\t\t\tclearInterval(refInterval.current)\n\t\t\tboard.tetriList.length >= 1 ? board.tetriList.concat(curTetri) : board.tetriList.push(curTetri)\n\t\t\tmoveTetri({type: 'SET_TETRI', payload: pieces.pieces[curTetri.listIndex]})\n\t\t}\n\t})\n\n\n\tconst [board, updateBoard] = useState({\n\t\ttab: [\n\t\t\t[0,0,0,0,0,0,0,0,0,0],\n\t\t\t[0,0,0,0,0,0,0,0,0,0],\n\t\t\t[0,0,0,0,0,0,0,0,0,0],\n\t\t\t[0,0,0,0,0,0,0,0,0,0],\n\t\t\t[0,0,0,0,0,0,0,0,0,0],\n\t\t\t[0,0,0,0,0,0,0,0,0,0],\n\t\t\t[0,0,0,0,0,0,0,0,0,0],\n\t\t\t[0,0,0,0,0,0,0,0,0,0],\n\t\t\t[0,0,0,0,0,0,0,0,0,0],\n\t\t\t[0,0,0,0,0,0,0,0,0,0],\n\t\t\t[0,0,0,0,0,0,0,0,0,0],\n\t\t\t[0,0,0,0,0,0,0,0,0,0],\n\t\t\t[0,0,0,0,0,0,0,0,0,0],\n\t\t\t[0,0,0,0,0,0,0,0,0,0],\n\t\t\t[0,0,0,0,0,0,0,0,0,0],\n\t\t\t[0,0,0,0,0,0,0,0,0,0],\n\t\t\t[0,0,0,0,0,0,0,0,0,0],\n\t\t\t[0,0,0,0,0,0,0,0,0,0],\n\t\t\t[0,0,0,0,0,0,0,0,0,0],\n\t\t\t[0,0,0,0,0,0,0,0,0,0]\n\t\t],\n\t\ttetriList: []\n\t})\n\n\tconst refInterval = useRef(false)\n\tconst tetri = curTetri.form\n\treturn (\n\t\t<div className='flex center'>\n\t\t\t<div className={'absolute'}>\n\t\t\t\t{\n\t\t\t\t\t<p>{`x: ${curTetri.x} y: ${curTetri.y}`}</p>\n\t\t\t\t}\n\t\t\t\t{\n\t\t\t\t\tboard.tab.map((line, index)=>{\n\t\t\t\t\t\treturn <div style={{display: 'flex'}} key={index}>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tline.map((col, index) => {\n\t\t\t\t\t\t\t\t\treturn <div key={index}>\n\t\t\t\t\t\t\t\t\t\t{col > 0\n\t\t\t\t\t\t\t\t\t\t\t? <Block color={curTetri.color}/>\n\t\t\t\t\t\t\t\t\t\t\t: <Block empty/>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t{\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={`absolute`}\n\t\t\t\t\t\tstyle={{backgroundColor: 'black', top: `${blockSize * curTetri.y + curTetri.y * 2}px`, left: `${blockSize * curTetri.x + curTetri.x * 2}px`}}>\n\t\t\t\t\t{\n\t\t\t\t\t\ttetri.map((line, index)=>{\n\t\t\t\t\t\treturn <div style={{display: 'flex'}} key={index}>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tline.map((col, index) => {\n\t\t\t\t\t\t\t\t\treturn <div key={index}>\n\t\t\t\t\t\t\t\t\t\t{col > 0\n\t\t\t\t\t\t\t\t\t\t\t? <Block color={curTetri.color}/>\n\t\t\t\t\t\t\t\t\t\t\t: <Block transparent/>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t})}\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t</div>\n\t\t</div>\n\t)\n}"]},"metadata":{},"sourceType":"module"}